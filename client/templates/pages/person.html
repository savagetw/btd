<template name="person">
    {{#with person}}
    <div class="person-details">
        <div class="row">
            <div class="col s12">
                <h2>{{name}}</h2>
            </div>
        </div>
        
        <div class="row">
            <div class="col s3">
                <label>Full name</label><br>
                <span>{{fullName}}</span>
            </div>

            {{#if candidateOn}}
            <div class="col s3">
                <label>Candidate On</label><br>
                <span>{{candidateWeekend}}</span>
            </div>

                {{#if table}}
                <div class="col s3">
                    <label>Table Of</label><br>
                    <span>{{table}}</span>
                </div>
                {{/if}}
            {{/if}}
        </div>

        <div class="row">
           {{#if status}}
            <div class="col s3">
                <label>Status</label><br>
                {{status}}
            </div>
            {{/if}}

            {{#if sponsor}}
            <div class="col s3">
                <label>Sponsor</label><br>
                <a href="/person/{{sponsor._id}}">{{sponsor.firstName}} {{sponsor.lastName}}</a>
            </div>
            {{/if}}

            {{#if spouse}}
            <div class="col s3">
                <label>Spouse</label><br>
                <a href="/person/{{spouse._id}}">{{spouse.firstName}} {{spouse.lastName}}</a>
            </div>
            {{/if}}
        </div>

        <div class="row">
            {{#if email}}
            <div class="col s3">
                <label>Email</label><br>
                {{email}}
            </div>
            {{/if}}

            {{#if addressLabel}}
            <div class="col s3">
                <label>Address</label><br>
                {{addressLabel}}
            </div>
            {{/if}}

            {{#if phoneList}}
            <div class="col s3">
                <label>Phone</label><br>
                {{{phoneList}}}
            </div>
            {{/if}}
        </div>

        <div class="row">
            {{#if church}}
            <div class="col s3">
                <label>Church</label><br>
                {{church}}
            </div>
            {{/if}}

            {{#if experiences.length}}
            <div class="col s3">
                <label>Weekends Worked</label><br>
                {{experiences.length}}
            </div>
            {{/if}}

            {{#if totalSponsored}}
            <div class="col s3">
                <label>Candidates Sponsored</label><br>
                {{totalSponsored}}
            </div>
            {{/if}}
            <div class="col s3"></div>
        </div>
    </div>
    <div class="person-experience">
        <h4>Team Experiences</h4>
        {{#if groupedExperiences}}
            <ul class="collection">
                {{#each roleTitle in groupedExperiences}}
                    <li class="collection-item">
                        {{roleTitle}}
                        &mdash; {{{weekendLinks roleTitle}}}
                    </li>
                {{/each}}
            </ul>
            <sub class="right">*denotes position served as head.</sub>
        {{else}}
            <em>This pescadore has no recorded team experiences.</em>
        {{/if}}
    </div>

    <div class="person-experience">
        <h4>Sponsored</h4>
        {{#if candidatesSponsored}}
            <ul class="collection">
                {{#each sponsoredPerson in candidatesSponsored}}
                    <li class="collection-item">
                        <a href="/person/{{sponsoredPerson._id}}">{{sponsoredPerson.name}}</a>
                        &mdash; {{sponsoredPerson.candidateWeekend}}
                    </li>
                {{/each}}
            </ul>
        {{else}}
            <em>This pescadore has not sponsored any other candidates.</em>
        {{/if}}
    </div>

    {{else}}
    <h4>Loading...</h4>
    {{/with}}
</template>